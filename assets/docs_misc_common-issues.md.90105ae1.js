import{_ as e,c as s,o as n,d as o}from"./app.e92a6bf3.js";const g=JSON.parse('{"title":"Common Issues","description":"","frontmatter":{},"headers":[{"level":2,"title":"Copy/Pasting Files","slug":"copy-pasting-files","link":"#copy-pasting-files","children":[]},{"level":2,"title":"Running Server logic on App Mods","slug":"running-server-logic-on-app-mods","link":"#running-server-logic-on-app-mods","children":[]},{"level":2,"title":"Editing the Wrong Files","slug":"editing-the-wrong-files","link":"#editing-the-wrong-files","children":[]},{"level":2,"title":"Confusing module.function with module:function","slug":"confusing-module-function-with-module-function","link":"#confusing-module-function-with-module-function","children":[]},{"level":2,"title":"Recursive mjrequire","slug":"recursive-mjrequire","link":"#recursive-mjrequire","children":[]}],"relativePath":"docs/misc/common-issues.md","lastUpdated":1664014405000}'),a={name:"docs/misc/common-issues.md"},i=o(`<h1 id="common-issues" tabindex="-1">Common Issues <a class="header-anchor" href="#common-issues" aria-hidden="true">#</a></h1><p>This page covers a few common issues that you may face, when developing mods for Sapiens.</p><h2 id="copy-pasting-files" tabindex="-1">Copy/Pasting Files <a class="header-anchor" href="#copy-pasting-files" aria-hidden="true">#</a></h2><p>Sapiens modding requires a special kind of coding style called <a href="/guide/shadowing.html">shadowing</a>. This is <em>required</em>. If you just copy/paste source files into your mod and edit them, they won&#39;t have any effect at all!</p><h2 id="running-server-logic-on-app-mods" tabindex="-1">Running Server logic on App Mods <a class="header-anchor" href="#running-server-logic-on-app-mods" aria-hidden="true">#</a></h2><p>There are two <a href="/docs/scripting/mod-types.html">mod types</a> in sapiens, App Mods, and World Mods. You must be aware of the limitation that doesn&#39;t allow App Mods to operate on the server thread. If you need the server thread, make a world mod instead.</p><h2 id="editing-the-wrong-files" tabindex="-1">Editing the Wrong Files <a class="header-anchor" href="#editing-the-wrong-files" aria-hidden="true">#</a></h2><p>When working in World mods, the mod is copied from your mods directory, into your testing world. From this point on, you will have two copies of your mod file. I suggest editing directly in the world (and using <code>git</code>+<code>github</code> to keep the two folder synced).</p><p>The &quot;issue&quot; you may face is editing the wrong files, and then being confused why your changes aren&#39;t showing up in your testing world.</p><h2 id="confusing-module-function-with-module-function" tabindex="-1">Confusing module.function with module:function <a class="header-anchor" href="#confusing-module-function-with-module-function" aria-hidden="true">#</a></h2><p>In lua, you define a module like <code>local foo = {}</code>. Functions can then be defined like:</p><div class="language-lua"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre><code><span class="line"><span style="color:#89DDFF;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">foo</span><span style="color:#A6ACCD;">:</span><span style="color:#82AAFF;">bar</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">arg1</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">...</span></span>
<span class="line"><span style="color:#89DDFF;">end</span></span>
<span class="line"></span></code></pre></div><p>This is a shorthand for the longer form (don&#39;t use this except for shadows)</p><div class="language-lua"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre><code><span class="line"><span style="color:#A6ACCD;">foo.</span><span style="color:#FFCB6B;">bar</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">function</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">self</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">arg1</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">...</span></span>
<span class="line"><span style="color:#89DDFF;">end</span></span>
<span class="line"></span></code></pre></div><p>As you can see, there is a mysterious &#39;self&#39; argument getting passed around when using the <code>:</code> syntax. This roughly represents the current object (?).</p><p>Now imagine that you&#39;ve defined a function as in the first example, and then attempted to call it like this:</p><div class="language-lua"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre><code><span class="line"><span style="color:#89DDFF;">local</span><span style="color:#A6ACCD;"> value </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> foo.</span><span style="color:#82AAFF;">bar</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">baz</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre></div><p>This would be incorrect, since you&#39;ve essentially put &#39;baz&#39; for &#39;self&#39; and &#39;nil&#39; for &#39;arg1&#39;. The correct way to call it would be <code>local value = foo:bar(&#39;baz&#39;)</code>.</p><h2 id="recursive-mjrequire" tabindex="-1">Recursive mjrequire <a class="header-anchor" href="#recursive-mjrequire" aria-hidden="true">#</a></h2><p>If you have <code>foo.lua</code> which requires <code>bar.lua</code>, then you can&#39;t require <code>bar.lua</code> in <code>foo.lua</code> because it would cause an infinite loop.</p><p>Workarounds:</p><ul><li>mjrequire inside of Functions</li><li>rework your architecture</li><li>pass <code>bar</code> as a parameter to <code>foo</code> (init function)</li></ul>`,22),l=[i];function t(r,c,p,d,u,h){return n(),s("div",null,l)}const y=e(a,[["render",t]]);export{g as __pageData,y as default};
